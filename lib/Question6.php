<?php include_once('BaseQuestion.php');include_once('lib/Connection.php');class Question6 extends BaseQuestion {public function getData() {global $docRoot;return $docRoot . 'q6.php';}public function getConnection() {return Connection::getInstance();}public function getInstructions() {return include_once('questions/Q6.php');}public function setup($connection) {try{/* @var $connection Connection */$connection->executeCmd('Create Table employee (EMP_ID int(11) NOT NULL, EMP_NAME varchar(20), EMP_SURNAME varchar(20), EMP_TITLE varchar(50), PRIMARY KEY (EMP_ID))');$connection->executeCmd('Create Table project (ID int(11) NOT NULL, TITLE varchar(20), DESCRIPTION varchar(20), STATE int(1), EMP_ID int(11), PRIMARY KEY (ID))');for ($i = 0; $i < 25; $i++) {$empN = (1000 + $i);$sql = 'Insert Into employee (EMP_ID, EMP_NAME, EMP_SURNAME, EMP_TITLE) ';$sql .= 'Values(';$sql .= $empN . ', ';$sql .= '"'. $this->generateFirstName() . '", ';$sql .= '"'. $this->generateLastName() . '", ';$sql .= '"'. $this->generateEmpTitle() . '")';$connection->executeCmd($sql);$proN = (2000 + $i);$connection->executeCmd($this->projectData($proN, $empN));if (((bool) mt_rand(0,1))) {$proN = (3000 + $i);$connection->executeCmd($this->projectData($proN, $empN));if (((bool) mt_rand(0,1))) {$proN = (4000 + $i);$connection->executeCmd($this->projectData($proN, $empN));}}if (((bool) mt_rand(0,1)) && ((bool) mt_rand(0,1))) {$proN = (5000 + $i);$connection->executeCmd($this->projectData($proN, $empN));if (((bool) mt_rand(0,1))) {$proN = (6000 + $i);$connection->executeCmd($this->projectData($proN, $empN));}}if (((bool) mt_rand(0,1))) {$proN = (7000 + $i);$connection->executeCmd($this->projectData($proN, $empN));if (((bool) mt_rand(0,1))) {$proN = (8000 + $i);$connection->executeCmd($this->projectData($proN, $empN));}}if (((bool) mt_rand(0,1)) && ((bool) mt_rand(0,1))) {$proN = (9000 + $i);$connection->executeCmd($this->projectData($proN, $empN));if (((bool) mt_rand(0,1))) {$proN = (10000 + $i);$connection->executeCmd($this->projectData($proN, $empN));}}}sleep(2);} catch (Exception $e) {die('Failed to Setup: '.$e->getMessage());}}public function getHttpResponse($post) {if (strtoupper($_SERVER['REQUEST_METHOD'] === 'POST') && !empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {$action = ((!empty($post) && !empty($post['action'])) ? $post['action'] : null);if (!empty($action) && strtolower($action) == 'done') {$msg = array('Well Done!!!', 'You are finished!!!', 'Great Work!!!', 'Congrats On The Work!!!', 'Fantastic Stuff!!!');return $msg[mt_rand(0, (count($msg) - 1))];} else {return 'Unknown Action';}} else {return 'Unknown Request Method';}}private function generateProjectState() {$states = array('Initial', 'Pending', 'Abandoned', 'Finished', 'OnHold');return $states[mt_rand(0, (count($states) - 1))];}private function generateProjectTitle() {$title = array('PayHost', 'PayWeb', 'PaySubs', 'PayBill', 'PayXml', 'PCS', 'PayFX', 'Shopping Carts', 'DatBase', 'Bank X');return $title[mt_rand(0, (count($title) - 1))];}private function generateProjectDesc() {$desc = array('Create XYZ', 'Update ABC', 'Spec TYG', 'Setup PLO', 'Some Stuff', 'Implement WSE', 'Customise UHY', 'Add HNJ', 'Remove FVG', 'Pitch SXD');return $desc[mt_rand(0, (count($desc) - 1))];}private function generateEmpTitle() {$title = array('Developer', 'Admin', 'Analyst', 'Security Architect', 'Project Manager', 'CTO', 'Support', 'CFO', 'MD', 'Sales');return $title[mt_rand(0, (count($title) - 1))];}private function generateFirstName() {$names  = array("Piet", "Alec", "Barry", "Morne", "David", "Hanno", "Chanel", "Abdul", "Jeffrey", "Jan");return $names[mt_rand(0, (count($names) - 1))];}private function generateLastName() {$names  = array("Venter", "Erasmus", "Hollis", "Havenga", "Beukes", "Avenant", "Carstens", "Sulayman", "Nqabeni", "Mostert");return $names[mt_rand(0, (count($names) - 1))];}private function projectData($proN, $empN) {$sql = 'Insert Into project (ID, TITLE, DESCRIPTION, STATE, EMP_ID) ';$sql .= 'Values(';$sql .= $proN . ', ';$sql .= '"'. $this->generateProjectTitle() . '", ';$sql .= '"'. $this->generateProjectDesc() . '", ';$sql .= '"'. $this->generateProjectState() . '", ';$sql .= $empN . ')';return $sql;}}